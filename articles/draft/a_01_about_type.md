# 型

型とは、SQLにおけるデータの取り扱いに関する形式のことです。
これまで勉強会の中でデータを見てきたときに、大雑把にいうと、3種類の型を扱ってきました。

- 数値
- 文字列
- 日時

## どうしてあるの？

## 型の種類
[Redshiftのデータ型](https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_Supported_data_types.html)

| カテゴリ | データ型 | 説明 |
|--|--|--|
| 数値 | SMALLINT | 2バイト整数(-32768〜+32767) |
| 数値 | INTEGER | 4バイト整数(-2147483648～+2147483647) |
| 数値 | BIGINTEGER | 8バイト整数(-9223372036854775808～9223372036854775807) |
| 数値 | DECIMAL | 精度の選択が可能な真数(最大38桁の精度) |
| 数値 | REAL | 単精度浮動小数点数(有効精度6桁) |
| 数値 | DOUBLE PRECISION | 倍精度浮動小数点数(有効精度15桁) |
| 数値 | BOOLEAN | 真偽値 |
| 文字 | CHAR | 固定長キャラクタ文字列 |
| 文字 | VARCHAR | 可変長キャラクタ文字列 |
| 日時 | DATE | カレンダー日付 |
| 日時 | TIMESTAMP | 日付と時刻(タイムゾーンなし) |
| 日時 | TIMESTAMPTZ | 日付と時刻(タイムゾーンあり) |

### 数値

![整数と実数](../images/a_01/integer_and_real.jpg)

いわゆる数字なのですが、少し扱いが面倒なものがあります。
数値も大きく分けると、整数と実数に分けられています。

- 整数 … 小数点以下のない数字です。
- 実数 … 小数点以下もある数字です。

| カテゴリ | データ型 | 説明 |
|--|--|--|
| 数値 | SMALLINT | 2バイト整数(-32768〜+32767) |
| 数値 | INTEGER | 4バイト整数(-2147483648～+2147483647) |
| 数値 | BIGINTEGER | 8バイト整数(-9223372036854775808～9223372036854775807)
| 数値 | DECIMAL | 精度の選択が可能な真数(最大38桁の精度) |
| 数値 | REAL | 単精度浮動小数点数(有効精度6桁) |
| 数値 | DOUBLE PRECISION | 倍精度浮動小数点数(有効精度15桁) |
| 数値 | BOOLEAN | 真偽値 |

気をつける必要があるところとして、割り算の結果が変わります。
整数同士の場合、結果は整数になります。
それ以外の場合は実数になります。

つまり、 `1 / 3` は `0` になりますが、`1.0 / 3.0` は `0.33…` になります。
整数同士の計算で `0.33…` を得たいときには、`Column1::Real / Column2` のように意図的にいずれかの値に型を指定してください。（[こちら](https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/r_numeric_computations201.html)にちゃんとした説明がありますので、よかったらみてみてください。）

この挙動の一番やっかいなところは、この計算はエラーが起きないことです。
普段から結果を確認するようにしましょう。

### 文字

![文字列](../images/a_01/character_string.jpg)

文字が列をなして並んでいるので、文字列です。言葉に馴染みがないと思いますが、よく使われるので気に留めておいてください。

文字の集まりなので、3文字目から6文字目を抜き出す、といったような操作ができます。

| カテゴリ | データ型 | 説明 |
|--|--|--|
| 文字 | CHAR | 固定長キャラクタ文字列 |
| 文字 | VARCHAR | 可変長キャラクタ文字列 |

### 日時

![文字列](../images/a_01/timezone.jpg)

| カテゴリ | データ型 | 説明 |
|--|--|--|
| 日時 | DATE | カレンダー日付 |
| 日時 | TIMESTAMP | 日付と時刻(タイムゾーンなし) |
| 日時 | TIMESTAMPTZ | 日付と時刻(タイムゾーンあり) |

#### タイムゾーン

## 参照
- [Amazon Redshift データベース開発者ガイド データ型](https://docs.aws.amazon.com/ja_jp/redshift/latest/dg/c_Supported_data_types.html)
